<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <title>Y86 Assembler</title>
    <link href="style.css" rel="stylesheet" type="text/css" />
  </head>
  <body>
    <h1>Y86 Assembler</h1>
    <h3>OCS35 Assignment, Trisha Vidyanand and Jake North</h3>
    <hr></hr>
    <h2>Input (Y86 Assembly)</h2>
    <textarea class="input">
.pos 0

init:
irmovq Stack, %rsp
irmovq Stack, %rbp
call Main
halt

Main:
ret

.pos 0x100
Stack:
    </textarea>
    <br></br>
    <button class="assemble">Assemble</button>
    <h2>Output (Y86 Machine Language)</h2>
    <pre class="output">Click "assemble" for output</pre>
    <h2>About this Assembler</h2>
    <h3 id="running">Running</h3>
<ul>
<li>Main program code is in assembler.js<ul>
<li>The <code>Assembler</code> class takes a code string in its constructor, and calling the <code>assemble</code> method will return a <code>ByteList</code> of the memory output. To see this in hex form, call the <code>toHex</code> method of the <code>ByteList</code>.<ul>
<li>Example: <code>(new Assembler(&quot;irmovq 5, %rax&quot;)).assemble().toHex()</code></li>
</ul>
</li>
<li>If the assembler encounters a syntax error, it will throw a JS error with a message describing the problem and line number.</li>
</ul>
</li>
<li>The web interface is in <code>index.html</code>.</li>
</ul>
<h3 id="assumptions">Assumptions</h3>
<ul>
<li>All ints are 8 bytes</li>
<li>Align on 8-byte boundaries</li>
<li>All instructions padded to 16 bytes</li>
<li>Numbers are little-endian</li>
<li>since registers are 8 bytes, rrmovq instead of rrmovl etc<ul>
<li>and registars are %rax instead of %eax</li>
<li>and addq instead of addl, etc</li>
</ul>
</li>
</ul>
<h3 id="citations">Citations</h3>
<ul>
<li>Syntax highlighting in the web interface is done using <a href="https://codemirror.net">CodeMirror</a>.</li>
</ul>

    <!-- codemirror -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js" integrity="sha512-xwrAU5yhWwdTvvmMNheFn9IyuDbl/Kyghz2J3wQRDR8tyNmT8ZIYOd0V3iPYY/g4XdNPy0n/g0NvqGu9f0fPJQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css" integrity="sha512-uf06llspW44/LZpHzHT6qBOIVODjWtv4MxCricRxkzvopAlSWnTf6hpZTFxuuZcuNE9CBQhqE0Seu1CoRk84nQ==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/gas/gas.min.js" integrity="sha512-PbDvBglqpQnvBSqmQ+XPS/SeqXVSpKWz/FjSSQsvMWmIShCyhi7+srYPx5M2FCeTf4Fv9wIpX75m3N3tljctdA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <!-- assignment code -->
    <script src="assembler.js"></script>
    <script src="main.js"></script>
    <style>
body {
  font-family: Arial;
}

.CodeMirror {
  border-style:solid !important;
  height: 400px;
}

.output {
  white-space: pre-wrap;
  width: 500px;
}

.err {
  color: red;
}
    </style>
  </body>
</html>